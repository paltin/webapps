<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Приложение для чтения текста</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
        }
        
        #screen1 {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0;
            min-height: 100vh;
            box-sizing: border-box;
        }
        
        #screen2 {
            display: none;
            position: relative;
            background-color: #2d2d2d;
            min-height: 100vh;
            padding: 5px;
            box-sizing: border-box;
        }
        
        #textInput {
            width: 600px;
            height: 200px;
            padding: 10px;
            font-size: 14px;
            border: 2px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            font-family: Arial, sans-serif;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 10px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        #backButton {
            position: absolute;
            top: 10px;
            right: 72px;
            width: 24px;
            height: 24px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #008CBA;
            font-size: 14px;
            z-index: 10;
        }
        
        #backButton:hover {
            background-color: #007B9A;
        }
        
        #settingsButton {
            position: absolute;
            top: 10px;
            right: 112px;
            width: 24px;
            height: 24px;
            padding: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background-color: #666666;
            font-size: 14px;
            z-index: 10;
        }
        
        #settingsButton:hover {
            background-color: #555555;
        }

        .home-button {
            position: fixed;
            top: 16px;
            right: 16px;
            padding: 10px 18px;
            border-radius: 999px;
            background-color: #008CBA;
            color: #ffffff;
            text-decoration: none;
            font-weight: 600;
            letter-spacing: 0.3px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: background-color 0.2s ease, transform 0.2s ease;
            z-index: 1000;
        }

        .home-button:hover {
            background-color: #007B9A;
            transform: translateY(-1px);
        }
        
        #settingsPanel {
            position: absolute;
            top: 40px;
            right: 40px;
            background-color: #3d3d3d;
            border: 1px solid #555555;
            border-radius: 8px;
            padding: 15px;
            min-width: 260px;
            z-index: 20;
            display: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        #settingsPanel h4 {
            color: #e8e8e8;
            margin: 0 0 10px 0;
            font-size: 14px;
        }
        
        .setting-group {
            margin-bottom: 15px;
        }
        
        .setting-group:last-child {
            margin-bottom: 0;
        }
        
        .setting-group label {
            color: #cccccc;
            font-size: 12px;
            display: block;
            margin-bottom: 5px;
        }
        
        .setting-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .setting-btn {
            width: 24px;
            height: 24px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #555555;
            color: #e8e8e8;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .setting-btn:hover {
            background-color: #666666;
        }
        
        .setting-btn:disabled {
            background-color: #444444;
            color: #666666;
            cursor: not-allowed;
        }
        
        .setting-display {
            color: #e8e8e8;
            font-size: 12px;
            min-width: 40px;
            text-align: center;
        }
        
        .font-select {
            background-color: #555555;
            color: #e8e8e8;
            border: 1px solid #666666;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }
        
        .font-select:hover {
            background-color: #666666;
        }
        
        .font-select:focus {
            outline: none;
            border-color: #888888;
        }
        
        #textDisplay {
            color: #e8e8e8;
            font-family: Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            padding: 50px 20px 20px 20px;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            width: 100%;
            max-width: none;
            box-sizing: border-box;
            margin: 0 auto;
        }
        
        /* Стилизация скроллбара */
        #textDisplay::-webkit-scrollbar {
            width: 12px;
        }
        
        #textDisplay::-webkit-scrollbar-track {
            background: #444444;
        }
        
        #textDisplay::-webkit-scrollbar-thumb {
            background: #888888;
            border-radius: 6px;
        }
        
        #textDisplay::-webkit-scrollbar-thumb:hover {
            background: #aaaaaa;
        }
        
        /* Для Firefox */
        #textDisplay {
            scrollbar-width: thin;
            scrollbar-color: #888888 #444444;
        }
        
        #controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .info-panel {
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #ddd;
            max-width: 600px;
        }
        
        .info-panel h3 {
            margin-top: 0;
            color: #333;
        }
        
        .info-panel ul {
            color: #666;
            line-height: 1.6;
        }
        
        .info-panel li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <a class="home-button" href="index.html">Back</a>
    <div id="screen1">
        <div id="controls">
            <textarea id="textInput" placeholder="Вставьте сюда текст для чтения..."></textarea>
            <button id="readButton">Read</button>
        </div>
        
        <div class="info-panel">
            <h3>Функции приложения:</h3>
            <ul>
                <li>Удобное чтение больших текстов</li>
                <li>Темная тема для комфорта глаз</li>
                <li>Полное выделение и копирование текста</li>
                <li>Прокрутка с помощью мыши или клавиш</li>
                <li>Четкий текст без размытия</li>
            </ul>
        </div>
    </div>

    <div id="screen2">
        <button id="settingsButton">⚙</button>
        <button id="backButton">←</button>
        
        <div id="settingsPanel">
            <h4>Настройки</h4>
            
            <div class="setting-group">
                <label>Шрифт:</label>
                <select id="fontFamilySelect" class="font-select">
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Courier New', monospace">Courier New</option>
                    <option value="Verdana, sans-serif">Verdana</option>
                    <option value="Tahoma, sans-serif">Tahoma</option>
                    <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                    <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                    <option value="Impact, sans-serif">Impact</option>
                    <option value="'Lucida Console', monospace">Lucida Console</option>
                </select>
            </div>
            
            <div class="setting-group">
                <label>Размер шрифта:</label>
                <div class="setting-controls">
                    <button id="fontSizeDown" class="setting-btn">−</button>
                    <span id="fontSizeDisplay" class="setting-display">16px</span>
                    <button id="fontSizeUp" class="setting-btn">+</button>
                </div>
            </div>
            
            <div class="setting-group">
                <label>Расстояние между буквами:</label>
                <div class="setting-controls">
                    <button id="letterSpacingDown" class="setting-btn">−</button>
                    <span id="letterSpacingDisplay" class="setting-display">0px</span>
                    <button id="letterSpacingUp" class="setting-btn">+</button>
                </div>
            </div>
            
            <div class="setting-group">
                <label>Ширина текста:</label>
                <div class="setting-controls">
                    <button id="textWidthDown" class="setting-btn">−</button>
                    <span id="textWidthDisplay" class="setting-display">100%</span>
                    <button id="textWidthUp" class="setting-btn">+</button>
                </div>
            </div>
        </div>
        
        <div id="textDisplay"></div>
    </div>

    <script>
        class TextReaderApp {
            constructor() {
                this.screen1 = document.getElementById('screen1');
                this.screen2 = document.getElementById('screen2');
                this.textInput = document.getElementById('textInput');
                this.readButton = document.getElementById('readButton');
                this.backButton = document.getElementById('backButton');
                this.settingsButton = document.getElementById('settingsButton');
                this.settingsPanel = document.getElementById('settingsPanel');
                this.textDisplay = document.getElementById('textDisplay');
                this.fontSizeUp = document.getElementById('fontSizeUp');
                this.fontSizeDown = document.getElementById('fontSizeDown');
                this.fontSizeDisplay = document.getElementById('fontSizeDisplay');
                this.letterSpacingUp = document.getElementById('letterSpacingUp');
                this.letterSpacingDown = document.getElementById('letterSpacingDown');
                this.letterSpacingDisplay = document.getElementById('letterSpacingDisplay');
                this.textWidthUp = document.getElementById('textWidthUp');
                this.textWidthDown = document.getElementById('textWidthDown');
                this.textWidthDisplay = document.getElementById('textWidthDisplay');
                this.fontFamilySelect = document.getElementById('fontFamilySelect');
                
                this.fontSize = 16;
                this.minFontSize = 12;
                this.maxFontSize = 32;
                this.letterSpacing = 0;
                this.minLetterSpacing = -2;
                this.maxLetterSpacing = 5;
                this.textWidth = 100;
                this.minTextWidth = 40;
                this.maxTextWidth = 100;
                this.fontFamily = "Arial, sans-serif";
                
                this.setupEventListeners();
                this.showScreen1();
            }
            
            setupEventListeners() {
                this.readButton.addEventListener('click', () => {
                    const text = this.textInput.value.trim();
                    if (text) {
                        this.showScreen2(text);
                    }
                });
                
                this.backButton.addEventListener('click', () => {
                    this.showScreen1();
                });
                
                this.settingsButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleSettingsPanel();
                });
                
                this.fontSizeUp.addEventListener('click', () => {
                    this.changeFontSize(2);
                });
                
                this.fontSizeDown.addEventListener('click', () => {
                    this.changeFontSize(-2);
                });
                
                this.letterSpacingUp.addEventListener('click', () => {
                    this.changeLetterSpacing(0.5);
                });
                
                this.letterSpacingDown.addEventListener('click', () => {
                    this.changeLetterSpacing(-0.5);
                });
                
                this.textWidthUp.addEventListener('click', () => {
                    this.changeTextWidth(5);
                });
                
                this.textWidthDown.addEventListener('click', () => {
                    this.changeTextWidth(-5);
                });
                
                this.fontFamilySelect.addEventListener('change', (e) => {
                    this.changeFontFamily(e.target.value);
                });
                
                // Close settings panel when clicking outside
                document.addEventListener('click', (e) => {
                    if (!this.settingsPanel.contains(e.target) && e.target !== this.settingsButton) {
                        this.settingsPanel.style.display = 'none';
                    }
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        if (this.settingsPanel.style.display === 'block') {
                            this.settingsPanel.style.display = 'none';
                        } else if (this.screen2.style.display !== 'none') {
                            this.showScreen1();
                        }
                    }
                    
                    // Font size shortcuts when on reading screen
                    if (this.screen2.style.display !== 'none') {
                        if (e.ctrlKey && e.key === '+') {
                            e.preventDefault();
                            this.changeFontSize(2);
                        } else if (e.ctrlKey && e.key === '-') {
                            e.preventDefault();
                            this.changeFontSize(-2);
                        } else if (e.ctrlKey && e.key === '0') {
                            e.preventDefault();
                            this.resetSettings();
                        } else if (e.ctrlKey && e.shiftKey && e.key === '+') {
                            e.preventDefault();
                            this.changeLetterSpacing(0.5);
                        } else if (e.ctrlKey && e.shiftKey && e.key === '_') {
                            e.preventDefault();
                            this.changeLetterSpacing(-0.5);
                        } else if (e.altKey && e.key === '+') {
                            e.preventDefault();
                            this.changeTextWidth(5);
                        } else if (e.altKey && e.key === '-') {
                            e.preventDefault();
                            this.changeTextWidth(-5);
                        }
                    }
                });
            }
            
            showScreen1() {
                this.screen1.style.display = 'flex';
                this.screen2.style.display = 'none';
                this.settingsButton.style.display = 'none';
                this.settingsPanel.style.display = 'none';
                document.body.style.backgroundColor = '#f0f0f0';
                this.textInput.focus();
            }
            
            showScreen2(text) {
                this.screen1.style.display = 'none';
                this.screen2.style.display = 'block';
                this.settingsButton.style.display = 'flex';
                this.settingsPanel.style.display = 'none';
                document.body.style.backgroundColor = '#1a1a1a';
                
                // Форматирование текста с сохранением абзацев и переносов
                this.textDisplay.textContent = text;
                this.textDisplay.scrollTop = 0;
                this.updateTextStyles();
                this.updateAllDisplays();
            }
            
            toggleSettingsPanel() {
                if (this.settingsPanel.style.display === 'block') {
                    this.settingsPanel.style.display = 'none';
                } else {
                    this.settingsPanel.style.display = 'block';
                }
            }
            
            changeFontSize(delta) {
                const newSize = this.fontSize + delta;
                if (newSize >= this.minFontSize && newSize <= this.maxFontSize) {
                    this.fontSize = newSize;
                    this.updateTextStyles();
                    this.updateAllDisplays();
                }
            }
            
            changeLetterSpacing(delta) {
                const newSpacing = this.letterSpacing + delta;
                if (newSpacing >= this.minLetterSpacing && newSpacing <= this.maxLetterSpacing) {
                    this.letterSpacing = newSpacing;
                    this.updateTextStyles();
                    this.updateAllDisplays();
                }
            }
            
            changeTextWidth(delta) {
                const newWidth = this.textWidth + delta;
                if (newWidth >= this.minTextWidth && newWidth <= this.maxTextWidth) {
                    this.textWidth = newWidth;
                    this.updateTextStyles();
                    this.updateAllDisplays();
                }
            }
            
            changeFontFamily(family) {
                this.fontFamily = family;
                this.updateTextStyles();
            }
            
            resetSettings() {
                this.fontSize = 16;
                this.letterSpacing = 0;
                this.textWidth = 100;
                this.fontFamily = "Arial, sans-serif";
                this.fontFamilySelect.value = this.fontFamily;
                this.updateTextStyles();
                this.updateAllDisplays();
            }
            
            updateTextStyles() {
                this.textDisplay.style.fontSize = this.fontSize + 'px';
                this.textDisplay.style.letterSpacing = this.letterSpacing + 'px';
                this.textDisplay.style.width = this.textWidth + '%';
                this.textDisplay.style.fontFamily = this.fontFamily;
                
                // Adjust horizontal padding based on width to center text
                const paddingPercent = (100 - this.textWidth) / 2;
                this.textDisplay.style.paddingLeft = `calc(${paddingPercent}% + 20px)`;
                this.textDisplay.style.paddingRight = `calc(${paddingPercent}% + 20px)`;
            }
            
            updateAllDisplays() {
                this.updateFontSizeDisplay();
                this.updateLetterSpacingDisplay();
                this.updateTextWidthDisplay();
            }
            
            updateFontSizeDisplay() {
                this.fontSizeDisplay.textContent = this.fontSize + 'px';
                
                // Update button states
                this.fontSizeDown.disabled = this.fontSize <= this.minFontSize;
                this.fontSizeUp.disabled = this.fontSize >= this.maxFontSize;
            }
            
            updateLetterSpacingDisplay() {
                this.letterSpacingDisplay.textContent = this.letterSpacing + 'px';
                
                // Update button states
                this.letterSpacingDown.disabled = this.letterSpacing <= this.minLetterSpacing;
                this.letterSpacingUp.disabled = this.letterSpacing >= this.maxLetterSpacing;
            }
            
            updateTextWidthDisplay() {
                this.textWidthDisplay.textContent = this.textWidth + '%';
                
                // Update button states
                this.textWidthDown.disabled = this.textWidth <= this.minTextWidth;
                this.textWidthUp.disabled = this.textWidth >= this.maxTextWidth;
            }
        }
        
        // Initialize the app when the page loads
        window.addEventListener('load', () => {
            new TextReaderApp();
        });
    </script>
</body>
</html>
